<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap>

	<select id="myDiary" resultClass="upload.bean.DiaryDataBean" parameterClass="upload.bean.DiaryDataBean">
		select * from dc_diary where couplename = #couplename# order by num
	</select>
	
	<select id="myDiary1" resultClass="int" parameterClass="upload.bean.DiaryDataBean">
		select count(*) from dc_diary where couplename = #couplename#
	</select>
	
	<insert id="insertDiary" parameterClass="upload.bean.DiaryDataBean">
		insert into dc_diary(num,couplename,subject,content,img,regdate,pool) values(
		dc_diary_seq.nextval,
		#couplename#,
		#subject#,
		#content#,
		#img#,
		sysdate,
		#pool#
		)
	</insert>
	
	<select id="modifyDiary" resultClass="upload.bean.DiaryDataBean" parameterClass="upload.bean.DiaryDataBean">
		select * from dc_diary where couplename = #couplename# and num = #num#
	</select>
	
	<update id="updateDiary" parameterClass="upload.bean.DiaryDataBean">
		update dc_diary set subject = #subject#, content=#content#, img=#img#, pool=#pool# where couplename=#couplename# and num=#num#
	</update>
	
	<update id="updateDiary1" parameterClass="upload.bean.DiaryDataBean">
		update dc_diary set subject = #subject#, content=#content#, pool=#pool# where couplename=#couplename# and num=#num#
	</update>
	
	<delete id="deleteDiary" parameterClass="upload.bean.DiaryDataBean">
		delete from dc_diary where couplename = #couplename# and num = #num#
	</delete>
	
	<select id="diaryImage" resultClass="upload.bean.CoupleDataBean" parameterClass="upload.bean.CoupleDataBean">
		select * from dc_couple where couplename=#couplename#	
	</select>
	
	<update id="diaryimgUpdate" parameterClass="upload.bean.CoupleDataBean">
		update dc_couple set coupleimage = #coupleimage# where couplename=#couplename#
	</update>
	
	<select id="num" resultClass="upload.bean.DiaryDataBean" parameterClass="upload.bean.DiaryDataBean">
		select * from dc_diary where num = #num# and couplename=#couplename#
	</select>
	
	<insert id="photo" parameterClass="upload.bean.PhotoDataBean">
		insert into dc_photo values(#couplename#, sysdate, #img#, #content#, #writeday#, #state#)		
	</insert>
	
	<select id="adphoto" resultClass="upload.bean.PhotoDataBean">
		select * from dc_photo
	</select>
	
	<update id="updatestate" parameterClass="upload.bean.PhotoDataBean">
		update dc_photo set state=#state# where couplename=#couplename# and regdate=#regdate#
	</update>
	
	<select id="photocontent" resultClass="upload.bean.PhotoDataBean" parameterClass="upload.bean.PhotoDataBean">
		select * from dc_photo where couplename = #couplename# and regdate=#regdate#
	</select>
	
</sqlMap>

